"use strict";exports.__esModule=true;exports.MeshExporter=void 0;var _jszip=_interopRequireDefault(require("jszip"));var _OBJParser=require("./OBJ-parser");var _STLParser=require("./STL-parser");var _validator=require("@oneisland/validator");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const{validate}=new _validator.Validator("MeshExporter");class MeshExporter{constructor(filename,filepath=""){validate({filename},"String");this.filename=`${filename}.zip`;this.filepath=filepath;this.zip=new _jszip.default}addMeshes(meshes){for(const key of Object.keys(meshes)){const folder=this.zip.folder(key);for(const mesh of meshes[key]){const OBJ=new _OBJParser.OBJParser(mesh,true);folder.file(OBJ.filename,OBJ.content);const STL=new _STLParser.STLParser(mesh);folder.file(STL.filename,STL.content)}}}save(){try{const fs=require("fs");const path=require("path");const buffer=this.zip.generateNodeStream({type:"nodebuffer",streamFiles:true});buffer.pipe(fs.createWriteStream(path.resolve(process.cwd(),this.filepath,this.filename)))}catch(e){this.zip.generateAsync({type:"blob"}).then(content=>{const button=document.createElement("a");button.href=window.URL.createObjectURL(content);button.download=this.filename;button.click()})}}}exports.MeshExporter=MeshExporter;
//# sourceMappingURL=exporter.js.map